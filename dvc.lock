schema: '2.0'
stages:
  _check-env-main:
    cmd: calkit check environment --name main
    deps:
    - path: requirements.txt
      hash: md5
      md5: 71b70ae67fe5d25ea43a603ebd55ce97
      size: 82
    outs:
    - path: .calkit/env-locks/main.txt
      hash: md5
      md5: d7690597a33ac72cd9fde4fd9274c2b6
      size: 3090
  _clean-nb-run-notebook:
    cmd: calkit nb clean "notebook.ipynb"
    deps:
    - path: notebook.ipynb
      hash: md5
      md5: af98afd3bd1fa2cb81883b3b568d172f
      size: 53660
    outs:
    - path: .calkit/notebooks/cleaned/notebook.ipynb
      hash: md5
      md5: 2a74e2c5e8f7114a9413d056b1c91656
      size: 2196
  get-data:
    cmd: calkit xenv -n main -- python ".calkit/notebook-stages/get-data/script.py"
    deps:
    - path: .calkit/notebook-stages/get-data/script.py
      hash: md5
      md5: 4e6af502d70995fc620a02c144fe7f86
      size: 320
    outs:
    - path: .calkit/notebook-stages/get-data/outs/df.parquet
      hash: md5
      md5: 841af510b89ee4329f2475a609570910
      size: 6848
  plot:
    cmd: calkit xenv -n main -- python ".calkit/notebook-stages/plot/script.py"
    deps:
    - path: .calkit/notebook-stages/get-data/outs/df.parquet
      hash: md5
      md5: 841af510b89ee4329f2475a609570910
      size: 6848
    - path: .calkit/notebook-stages/plot/script.py
      hash: md5
      md5: 5daac0113ab7356a75657eae4fa0d3fa
      size: 369
    outs:
    - path: .calkit/notebook-stages/plot/outs/fig.pickle
      hash: md5
      md5: e11c7846032ba431b49fee7c86e7c92c
      size: 11265
    - path: figures/plot.png
      hash: md5
      md5: f17a8c3d6436659199984f2e15fa3895
      size: 33917
  run-notebook:
    cmd: calkit nb execute --environment main --no-check --to html "notebook.ipynb"
    deps:
    - path: .calkit/env-locks/main.txt
      hash: md5
      md5: d7690597a33ac72cd9fde4fd9274c2b6
      size: 3090
    - path: .calkit/notebooks/cleaned/notebook.ipynb
      hash: md5
      md5: 2a74e2c5e8f7114a9413d056b1c91656
      size: 2196
    outs:
    - path: .calkit/notebooks/executed/notebook.ipynb
      hash: md5
      md5: 033f49eaf52b934713dde97c7738fd5c
      size: 29575
